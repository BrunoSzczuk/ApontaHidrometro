<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
    <div class="container  col-sm-12 col-md-6 offset-md-1" th:fragment="corpo">
        <hr class="my-3">


            <div class="card mb-3">
                <h3 th:text="#{titulo.estados}"></h3>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <div th:class="${#strings.isEmpty(message)}? 'card ' : 'card border-success mb-3' ">
                        <div class="card-header">
                            <a class="btn btn-primary" th:href="@{/estado/add}">adicionar</a>
                            <span th:text="${#strings.isEmpty(message)}? '': ${message}"> </span>
                        </div>
                    </div>
                    <table class="table table-striped table-bordered nowrap" id="dataTable" width="100%" cellspacing="0">
                        <thead>
                            <tr>
                                <th th:text="#{lbcodigo}">Cód</th>
                                <th th:text="#{lbdescricao}">Descrição</th>
                                <th th:text="#{lbcodigopais}"></th>
                                <th th:text="#{lbdescricaopais}"></th>
                                <th th:text="#{lbstatus}">Status</th>
                                <th th:text="#{lbacao}">Ação</th>
                            </tr>
                        </thead>
                        <tbody id="dados">
                            <tr th:each="e : ${estados}" th:class="${!e.stAtivo}? 'table-danger': ''" >
                                <td th:text="${e.cdEstado}"></td>
                                <td th:text="${e.dsEstado} "></td>
                                <td th:text="${e.pais.cdPais} "></td>
                                <td th:text="${e.pais.dsPais} "></td>
                                <td> <span th:class="${e.stAtivo}? 'fas fa-check' : 'fas fa-ban'"/></td>
                                <td>
                                    <a class="btn btn-info" th:href="@{/estado/update/{id}(id=${e.cdEstado})}" th:text="#{lbeditar}"></a>
                                    <a class="btn btn-danger" th:href="@{/estado/delete/{id}(id=${e.cdEstado})}" th:text="#{lbexcluir}"></a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <script th:src="@{/static/css/datatables/jquery.dataTables.js}"></script>
            <script th:src="@{/static/css/datatables/dataTables.bootstrap4.js}"></script>
            <script src="https://cdn.datatables.net/responsive/2.2.3/js/dataTables.responsive.min.js"></script>
            <script src="https://cdn.datatables.net/responsive/2.2.3/js/responsive.bootstrap4.min.js"></script>

            <script>
                $(document).ready(function () {
                    $("#edFiltrar").on("keyup", function () {
                        var value = $(this).val().toLowerCase();
                        $("#dados tr").filter(function () {
                            $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
                        });
                    });
                });
                $(document).ready(function () {
                    $('#dataTable').DataTable({

                        responsive: {
                            details: {
                                display: $.fn.dataTable.Responsive.display.modal({
                                    header: function (row) {
                                        var data = row.data();
                                        return 'Detalhes de ' + data[0] + ' ' + data[1];
                                    }
                                }),
                                renderer: $.fn.dataTable.Responsive.renderer.tableAll({
                                    tableClass: 'table'
                                })
                            }
                        },
                        language: {
                            lengthMenu: "Exibindo _MENU_ registros por página",
                            zeroRecords: "Nada encontrado - desculpe :(",
                            info: "Exibindo página _PAGE_ de _PAGES_",
                            infoEmpty: "Nenhum registro disponível",
                            search: "Pesquisar",
                            paginate: {
                                first: "Primeiro",
                                last: "Último",
                                next: "Próximo",
                                previous: "Anterior"
                            },
                            infoFiltered: "(filtrado de _MAX_ registro totais)"
                        }
                    });
                });
            </script>

    </div>


</html>
